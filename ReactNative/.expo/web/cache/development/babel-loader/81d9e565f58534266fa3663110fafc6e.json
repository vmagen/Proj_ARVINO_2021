{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\vmage\\\\OneDrive\\\\Ruppin\\\\\\u05E9\\u05E0\\u05D4 \\u05D2\\\\\\u05E1\\u05DE\\u05E1\\u05D8\\u05E8 \\u05D1\\\\Proj_July_RN\\\\FunctionalComponents\\\\FCSearch.js\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { ListItem } from 'react-native-elements';\nimport { Searchbar } from 'react-native-paper';\nimport helpers from \"../helpers/helperFunctions\";\nimport messages from \"../helpers/messages.json\";\nimport { useNavigation } from '@react-navigation/native';\nvar searchFor = [messages.wines, messages.wineries, messages.event, messages.groups];\n\nfunction FCSearch(props) {\n  var _this = this;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredDataSource = _useState4[0],\n      setFilteredDataSource = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      masterDataSource = _useState6[0],\n      setMasterDataSource = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      type = _useState8[0],\n      setType = _useState8[1];\n\n  var _useState9 = useState(props.loaded),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isLoaded = _useState10[0],\n      setisLoaded = _useState10[1];\n\n  var navigation = useNavigation();\n  var windowWidth = Dimensions.get('window').width;\n  useEffect(function () {\n    setType(props.type);\n\n    if (props.type === messages.wines) {\n      getData('/Wine/GetAllWines');\n    } else if (props.type === messages.wineries) {\n      getData('/Winery');\n    } else if (props.type === messages.event) {\n      setFilteredDataSource(\"\");\n      console.log(\"EVENTS\", props.data.length);\n      setMasterDataSource(props.data);\n      setisLoaded(true);\n    } else if (props.type === messages.groups) {\n      setFilteredDataSource(\"\");\n      console.log(\"GROUPS\", props.data.length);\n      setMasterDataSource(props.data);\n      setisLoaded(true);\n    } else if (props.type === messages.searchInArvino) {}\n  }, []);\n\n  var getData = function getData(type) {\n    fetch(helpers.getApi() + type, {\n      method: 'GET',\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n        'Accept': 'application/json; charset=UTF-8'\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (result) {\n      setFilteredDataSource(\"\");\n      setMasterDataSource(result);\n    }).then(function () {\n      setisLoaded(true);\n    }, function (error) {\n      console.log(\"err post=\", error);\n    });\n  };\n\n  var searchFilterFunction = function searchFilterFunction(text) {\n    if (text) {\n      var newData = masterDataSource.filter(function (item) {\n        if (props.type === messages.wines) {\n          var itemData = item.wineName ? item.wineName : '';\n          var textData = text;\n          return itemData.indexOf(textData) > -1;\n        } else if (props.type === messages.wineries) {\n          var _itemData = item.wineryName ? item.wineryName : '';\n\n          var _textData = text;\n          return _itemData.indexOf(_textData) > -1;\n        } else if (props.type === messages.event) {\n          var _itemData2 = item.eventName ? item.eventName : '';\n\n          var _textData2 = text;\n          return _itemData2.indexOf(_textData2) > -1;\n        } else if (props.type === messages.groups) {\n          var _itemData3 = item.groupName ? item.groupName : '';\n\n          var _textData3 = text;\n          return _itemData3.indexOf(_textData3) > -1;\n        }\n      });\n      setFilteredDataSource(newData);\n      setSearch(text);\n    } else {\n      setFilteredDataSource(\"\");\n      setSearch(text);\n    }\n  };\n\n  var ItemView = function ItemView(_ref) {\n    var item = _ref.item;\n\n    if (props.type === messages.wines) {\n      return React.createElement(ListItem, {\n        onPress: function onPress() {\n          return getItem(item);\n        },\n        bottomDivider: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }\n      }, React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5,\n          alignContent: 'flex-end'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }, React.createElement(ListItem.Title, {\n        style: {\n          textAlign: 'right',\n          marginLeft: 20,\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }, item.wineName), React.createElement(ListItem.Subtitle, {\n        style: {\n          textAlign: 'right',\n          marginLeft: 20\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }\n      }, \"\\u05D9\\u05E7\\u05D1 \", item.wineryName)), React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: item.wineImgPath\n        },\n        style: {\n          height: 50,\n          width: 40,\n          marginLeft: 40,\n          alignItems: 'flex-end'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      })));\n    } else if (props.type === messages.wineries) {\n      return React.createElement(ListItem, {\n        onPress: function onPress() {\n          return getItem(item);\n        },\n        bottomDivider: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }, React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5,\n          alignContent: 'flex-end'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }\n      }, React.createElement(ListItem.Title, {\n        style: {\n          textAlign: 'right',\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }\n      }, item.wineryName)), React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: item.IconImgPath\n        },\n        style: {\n          height: 50,\n          width: 40,\n          alignItems: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }\n      })));\n    } else if (props.type === messages.event) {\n      return React.createElement(ListItem, {\n        onPress: function onPress() {\n          return getItem(item);\n        },\n        bottomDivider: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 9\n        }\n      }, React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5,\n          alignContent: 'flex-end'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }\n      }, React.createElement(ListItem.Title, {\n        style: {\n          textAlign: 'right',\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      }, item.eventName)), React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: item.eventImgPath\n        },\n        style: {\n          height: 50,\n          width: 40,\n          alignItems: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }\n      })));\n    } else if (props.type === messages.groups) {\n      return React.createElement(ListItem, {\n        onPress: function onPress() {\n          return getItem(item);\n        },\n        bottomDivider: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }, React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5,\n          alignContent: 'flex-end'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }\n      }, React.createElement(ListItem.Title, {\n        style: {\n          textAlign: 'right',\n          fontWeight: 'bold'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }\n      }, item.groupName), React.createElement(ListItem.Subtitle, {\n        style: {\n          textAlign: 'right'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }\n      }, item.groupDescription)), React.createElement(ListItem.Content, {\n        style: {\n          flex: 0.5\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: item.ImgPath\n        },\n        style: {\n          height: 50,\n          width: 40,\n          alignItems: 'center',\n          marginLeft: 50\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }\n      })));\n    }\n  };\n\n  var getItem = function getItem(item) {\n    if (props.type === messages.wines) {\n      navigation.navigate('Login', {\n        screen: 'wine',\n        params: {\n          name: item.wineName,\n          image: item.wineImgPath,\n          content: item.content,\n          id: item.wineId,\n          price: item.price,\n          wineryImage: item.wineryImage,\n          areaCategoryName: item.areaCategoryName,\n          wineryName: item.wineryName\n        }\n      });\n    } else if (props.type === messages.wineries) {\n      navigation.navigate('Login', {\n        screen: 'winery',\n        params: {\n          name: item.wineryName,\n          image: item.IconImgPath,\n          id: item.wineryId\n        }\n      });\n    } else if (props.type === messages.event) {\n      console.log(item);\n      navigation.navigate('Login', {\n        screen: 'Event',\n        params: {\n          id: item.eventId,\n          name: item.eventName,\n          date: item.eventDate,\n          time: item.startTime,\n          picture: item.eventImgPath,\n          description: item.content,\n          price: item.price,\n          ticketsLeft: item.participantsAmount\n        }\n      });\n    } else if (props.type === messages.groups) {\n      navigation.navigate('Login', {\n        screen: 'groupChat',\n        params: {\n          name: item.groupName,\n          description: item.groupDescription,\n          picture: item.ImgPath,\n          id: item.groupId\n        }\n      });\n    }\n  };\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }\n  }, React.createElement(Searchbar, {\n    style: {\n      width: windowWidth * 0.9,\n      alignSelf: 'center',\n      marginTop: 10,\n      marginBottom: 10\n    },\n    inputStyle: {\n      textAlign: 'right'\n    },\n    onChangeText: function onChangeText(text) {\n      return searchFilterFunction(text);\n    },\n    onClear: function onClear(text) {\n      return searchFilterFunction('');\n    },\n    placeholder: props.placeholder,\n    value: search,\n    cancelIcon: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }\n  }, React.createElement(FlatList, {\n    data: filteredDataSource,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    renderItem: ItemView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default FCSearch;","map":{"version":3,"sources":["C:/Users/vmage/OneDrive/Ruppin/שנה ג/סמסטר ב/Proj_July_RN/FunctionalComponents/FCSearch.js"],"names":["React","useState","useEffect","ListItem","Searchbar","helpers","messages","useNavigation","searchFor","wines","wineries","event","groups","FCSearch","props","search","setSearch","filteredDataSource","setFilteredDataSource","masterDataSource","setMasterDataSource","type","setType","loaded","isLoaded","setisLoaded","navigation","windowWidth","Dimensions","get","width","getData","console","log","data","length","searchInArvino","fetch","getApi","method","headers","Headers","then","res","json","result","error","searchFilterFunction","text","newData","filter","item","itemData","wineName","textData","indexOf","wineryName","eventName","groupName","ItemView","getItem","flex","alignContent","textAlign","marginLeft","fontWeight","uri","wineImgPath","height","alignItems","IconImgPath","eventImgPath","groupDescription","ImgPath","navigate","screen","params","name","image","content","id","wineId","price","wineryImage","areaCategoryName","wineryId","eventId","date","eventDate","time","startTime","picture","description","ticketsLeft","participantsAmount","groupId","alignSelf","marginTop","marginBottom","placeholder","index","toString"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, FlatList, Image, Dimensions } from 'react-native';\r\nimport { ListItem } from 'react-native-elements';\r\nimport { Searchbar } from 'react-native-paper';\r\nimport helpers from '../helpers/helperFunctions';\r\nimport messages from '../helpers/messages.json';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nconst searchFor = [messages.wines, messages.wineries, messages.event, messages.groups];\r\n\r\nfunction FCSearch(props) {\r\n  const [search, setSearch] = useState('');\r\n  const [filteredDataSource, setFilteredDataSource] = useState([]);\r\n  const [masterDataSource, setMasterDataSource] = useState([]);\r\n  const [type, setType] = useState(\"\");\r\n  const [isLoaded, setisLoaded] = useState(props.loaded);\r\n  const navigation = useNavigation();\r\n  const windowWidth = Dimensions.get('window').width;\r\n\r\n\r\n  useEffect(() => {\r\n    // console.log(\"prop type:\", props.type)\r\n    setType(props.type);\r\n    if (props.type === messages.wines) {\r\n      getData('/Wine/GetAllWines');\r\n    }\r\n    else if (props.type === messages.wineries) {\r\n      getData('/Winery');\r\n    }\r\n    else if (props.type === messages.event) {\r\n      setFilteredDataSource(\"\");\r\n      console.log(\"EVENTS\", props.data.length)\r\n      setMasterDataSource(props.data);\r\n      setisLoaded(true);\r\n    }\r\n    else if (props.type === messages.groups) {\r\n      setFilteredDataSource(\"\");\r\n      console.log(\"GROUPS\", props.data.length)\r\n      setMasterDataSource(props.data);\r\n      setisLoaded(true);\r\n    }\r\n    else if (props.type === messages.searchInArvino) {\r\n\r\n    }\r\n  }, []);\r\n\r\n  const getData = (type) => {\r\n    fetch(helpers.getApi() + type,\r\n      {\r\n        method: 'GET',\r\n        headers: new Headers({\r\n          'Content-Type': 'application/json; charset=UTF-8',\r\n          'Accept': 'application/json; charset=UTF-8',\r\n        })\r\n      })\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(\r\n        (result) => {\r\n          setFilteredDataSource(\"\");\r\n          setMasterDataSource(result);\r\n          // console.log(\"MDS: \", type + \"-\" + masterDataSource.length);\r\n        })\r\n      .then(\r\n        () => {\r\n          setisLoaded(true)\r\n        }\r\n        ,\r\n        (error) => {\r\n          console.log(\"err post=\", error);\r\n        });\r\n\r\n  }\r\n\r\n  const searchFilterFunction = (text) => {\r\n    // Check if searched text is not blank\r\n    if (text) {\r\n      const newData = masterDataSource.filter(function (item) {\r\n        if (props.type === messages.wines) {\r\n          const itemData = item.wineName ? item.wineName : '';\r\n          const textData = text;\r\n          return itemData.indexOf(textData) > -1;\r\n        }\r\n        else if (props.type === messages.wineries) {\r\n          const itemData = item.wineryName ? item.wineryName : '';\r\n          const textData = text;\r\n          return itemData.indexOf(textData) > -1;\r\n        }\r\n        else if (props.type === messages.event) {\r\n          const itemData = item.eventName ? item.eventName : '';\r\n          const textData = text;\r\n          return itemData.indexOf(textData) > -1;\r\n        }\r\n        else if (props.type === messages.groups) {\r\n          const itemData = item.groupName ? item.groupName : '';\r\n          const textData = text;\r\n          return itemData.indexOf(textData) > -1;\r\n        }\r\n      });\r\n      setFilteredDataSource(newData);\r\n      setSearch(text);\r\n    } else {\r\n      setFilteredDataSource(\"\");\r\n      setSearch(text);\r\n    }\r\n  };\r\n\r\n  const ItemView = ({ item }) => {\r\n\r\n    if (props.type === messages.wines) {\r\n      return (\r\n        // Flat List Item -WINES\r\n        <ListItem\r\n          onPress={() => getItem(item)}\r\n          bottomDivider\r\n        >\r\n          <ListItem.Content style={{ flex: 0.5, alignContent: 'flex-end' }}>\r\n            <ListItem.Title style={{ textAlign: 'right', marginLeft: 20, fontWeight: 'bold' }}>{item.wineName}</ListItem.Title>\r\n            <ListItem.Subtitle style={{ textAlign: 'right', marginLeft: 20 }}>יקב {item.wineryName}</ListItem.Subtitle>\r\n          </ListItem.Content>\r\n          <ListItem.Content style={{ flex: 0.5 }}>\r\n            <Image\r\n              source={{ uri: item.wineImgPath }}\r\n              style={{ height: 50, width: 40, marginLeft: 40, alignItems: 'flex-end' }}\r\n            />\r\n          </ListItem.Content>\r\n        </ListItem>\r\n      );\r\n    }\r\n    else if (props.type === messages.wineries) {\r\n      return (\r\n        // Flat List Item WINERIES\r\n        <ListItem\r\n          onPress={() => getItem(item)}\r\n          bottomDivider>\r\n          <ListItem.Content style={{ flex: 0.5, alignContent: 'flex-end' }}>\r\n            <ListItem.Title style={{ textAlign: 'right', fontWeight: 'bold' }}>{item.wineryName}</ListItem.Title>\r\n          </ListItem.Content>\r\n          <ListItem.Content style={{ flex: 0.5 }}>\r\n            <Image\r\n              source={{ uri: item.IconImgPath }}\r\n              style={{ height: 50, width: 40, alignItems: 'center' }}\r\n            />\r\n          </ListItem.Content>\r\n        </ListItem>\r\n      );\r\n    }\r\n    else if (props.type === messages.event) {\r\n      return (\r\n        // Flat List Item EVENTS\r\n        <ListItem\r\n          onPress={() => getItem(item)}\r\n          bottomDivider>\r\n          <ListItem.Content style={{ flex: 0.5, alignContent: 'flex-end' }}>\r\n            <ListItem.Title style={{ textAlign: 'right', fontWeight: 'bold' }}>{item.eventName}</ListItem.Title>\r\n          </ListItem.Content>\r\n          <ListItem.Content style={{ flex: 0.5 }}>\r\n            <Image\r\n              source={{ uri: item.eventImgPath }}\r\n              style={{ height: 50, width: 40, alignItems: 'center' }}\r\n            />\r\n          </ListItem.Content>\r\n        </ListItem>\r\n      );\r\n    }\r\n    else if (props.type === messages.groups) {\r\n      return (\r\n        // Flat List Item GROUPS\r\n        <ListItem\r\n          onPress={() => getItem(item)}\r\n          bottomDivider\r\n        >\r\n          <ListItem.Content style={{ flex: 0.5, alignContent: 'flex-end' }}>\r\n            <ListItem.Title style={{ textAlign: 'right', fontWeight: 'bold' }}>{item.groupName}</ListItem.Title>\r\n            <ListItem.Subtitle style={{ textAlign: 'right' }}>{item.groupDescription}</ListItem.Subtitle>\r\n          </ListItem.Content>\r\n          <ListItem.Content style={{ flex: 0.5 }}>\r\n            <Image\r\n              source={{ uri: item.ImgPath }}\r\n              style={{ height: 50, width: 40, alignItems: 'center', marginLeft: 50 }}\r\n            />\r\n          </ListItem.Content>\r\n        </ListItem>\r\n      );\r\n    }\r\n  };\r\n\r\n  const getItem = (item) => {\r\n    // Function for click on an item\r\n    if (props.type === messages.wines) {\r\n      navigation.navigate('Login', {\r\n        screen: 'wine',\r\n        params: {\r\n          name: item.wineName,\r\n          image: item.wineImgPath,\r\n          content: item.content,\r\n          id: item.wineId,\r\n          price: item.price,\r\n          wineryImage: item.wineryImage,\r\n          areaCategoryName: item.areaCategoryName,\r\n          wineryName: item.wineryName\r\n        }\r\n      });\r\n    }\r\n    else if (props.type === messages.wineries) {\r\n      navigation.navigate('Login', {\r\n        screen: 'winery',\r\n        params: {\r\n          name: item.wineryName,\r\n          image: item.IconImgPath,\r\n          id: item.wineryId\r\n        }\r\n      });\r\n    }\r\n    else if (props.type === messages.event) {\r\n      console.log(item);\r\n      navigation.navigate('Login', {\r\n        screen: 'Event',\r\n        params: {\r\n          id: item.eventId,\r\n          name: item.eventName,\r\n          date: item.eventDate,\r\n          time: item.startTime,\r\n          picture: item.eventImgPath,\r\n          description: item.content,\r\n          price: item.price,\r\n          ticketsLeft: item.participantsAmount\r\n        }\r\n      });\r\n    }\r\n    else if (props.type === messages.groups) {\r\n      navigation.navigate('Login', {\r\n        screen: 'groupChat',\r\n        params: {\r\n          name: item.groupName,\r\n          description: item.groupDescription,\r\n          picture: item.ImgPath,\r\n          id: item.groupId\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <View>\r\n      <View>\r\n        <Searchbar\r\n          style={{width:windowWidth*0.9, alignSelf:'center', marginTop:10, marginBottom:10}}\r\n          inputStyle={{textAlign:'right'}}\r\n          onChangeText={(text) => searchFilterFunction(text)}\r\n          onClear={(text) => searchFilterFunction('')}\r\n          placeholder={props.placeholder}\r\n          value={search}\r\n          cancelIcon={true}\r\n        />\r\n      </View>\r\n      <View>\r\n        <FlatList\r\n          data={filteredDataSource}\r\n          keyExtractor={(item, index) => index.toString()}\r\n          renderItem={ItemView}\r\n        />\r\n      </View>\r\n    </View>\r\n  );\r\n\r\n}\r\n\r\nexport default FCSearch;"]},"metadata":{},"sourceType":"module"}